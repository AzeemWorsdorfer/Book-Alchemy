<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Library Home</title>
  </head>
  <body>
    <h1>Book Alchemy Library</h1>

    {% with messages = get_flashed_messages() %} {% if messages %}
    <ul class="flashes">
      {% for message in messages %}
      <li>{{ message }}</li>
      {% endfor %}
    </ul>
    {% endif %} {% endwith %} {% if search_message %}
    <p style="color: blue; font-weight: bold">{{ search_message }}</p>
    {% endif %}

    <p>
      <a href="{{ url_for('add_author') }}">Add Author</a> |
      <a href="{{ url_for('add_book') }}">Add Book</a>
    </p>

    <h3>
      Sort By: <a href="{{ url_for('home', sort='title') }}">Title</a> |
      <a href="{{ url_for('home', sort='author') }}">Author Name</a>
    </h3>

    <form action="{{ url_for('home') }}" method="GET">
      <label for="search_term">Search Books:</label>
      <input
        type="text"
        id="search_term"
        name="search_term"
        placeholder="Enter title or ISBN"
      />
      <input type="submit" value="Search" />
    </form>

    <hr />

    {% for book in books %}
    <div style="border: 1px solid #ccc; padding: 10px; margin-bottom: 10px">
      <h3>{{ book.title }}</h3>
      <p>
        <strong>Author:</strong> {{ book.author.name }}<br />
        <strong>ISBN:</strong> {{ book.isbn }}<br />
      </p>

      <form
        action="{{ url_for('delete_book', book_id=book.id) }}"
        method="POST"
        style="display: inline"
      >
        <input
          type="submit"
          value="Delete Book"
          onclick="return confirm('Are you sure you want to delete {{ book.title }}?');"
        />
      </form>
    </div>
    {% endfor %}
  </body>
</html>
